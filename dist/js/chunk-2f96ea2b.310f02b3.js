(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f96ea2b"],{3485:function(t,i,s){},4217:function(t,i,s){"use strict";s("3485")},"4e0c":function(t,i,s){t.exports=s.p+"img/default_user.9af42ba9.png"},"99c6":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm border-right",staticStyle:{"margin-right":"15px","background-color":"#f3f3f3"}}),e("div",{staticClass:"col-auto",staticStyle:{width:"800px"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 px-1 pt-1 pb-1"},[e("div",{staticClass:"card text-dark mt-0 pb-0 mb-3",staticStyle:{width:"800px"}},[t._m(0),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"card-body bg-white p-2",staticStyle:{height:"292px",overflow:"auto"}},[e("div",{staticClass:"row justify-content-center",staticStyle:{width:"800px"}},[e("div",{staticClass:"col-6 border-right"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto pr-0 mr-0"},[""!=t.patient.picture&&t.patient.picture?e("img",{staticClass:"img-fluid border-right",staticStyle:{height:"153px",width:"153px"},attrs:{src:t.patient.picture,alt:""}}):t._e(),""!=t.patient.picture&&t.patient.picture?t._e():e("img",{staticClass:"img-fluid border-right",staticStyle:{height:"153px",width:"153px"},attrs:{src:s("4e0c"),alt:""}})]),e("div",{staticClass:"col ml-0"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.patient.name)+" "+t._s(t.patient.surname))]),e("ul",{staticClass:"list-group list-group-flush"},[e("li",{staticClass:"list-group-item text-danger"},[e("b",[t._v("Najbliższa wizyta:")]),t._v(" "+t._s(t.lastVisit[0])+"."+t._s(t.lastVisit[1])+"."+t._s(t.lastVisit[2]))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Saldo:")]),t._v(" "+t._s(t.accountBalance))])])])]),e("div",{staticClass:"card mt-1 ml-0 mr-0 p-0 mb-0"},[t._m(1),e("div",{staticClass:"card-body p-1",staticStyle:{height:"92px",overflow:"auto"}},[e("p",{staticClass:"card-text"},[t._v(t._s(t.patient.message))])])])]),e("div",{staticClass:"col-6 m-0 p-0"},[e("div",{staticClass:"px-2",staticStyle:{height:"276px",overflow:"auto"}},[e("ul",{staticClass:"list-group list-group-flush"},[e("li",{staticClass:"list-group-item"},[e("b",[t._v("Pesel:")]),t._v(" "+t._s(t.patient.pesel))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Wiek:")]),t._v(" "+t._s(t.patient.age))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Płeć:")]),t._v(" "+t._s(t.patient.gender))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Data urodzenia:")]),t._v(" "+t._s(t.patient.birth_date))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Telefon:")]),t._v(" "+t._s(t.patient.phone))]),e("li",{staticClass:"list-group-item"},[e("b",[t._v("Adress:")]),t._v(" "+t._s(t.patient.street)+" "+t._s(t.patient.property)+"/"+t._s(t.patient.premises)+" "),e("p",{staticClass:"pb-0 mb-0",staticStyle:{"padding-left":"40px"}},[t._v(t._s(t.patient.zip_code)+", "+t._s(t.patient.city)+".")])])])])])])])])]),e("button",{staticClass:"btn btn-dark btn-sm",staticStyle:{width:"128px",height:"30px"},attrs:{id:"btnVisitViews"},on:{click:function(i){return t.VisitViews()}}},[t._v("Historia wizyt")])])]),e("div",{staticClass:"row",staticStyle:{display:"block"},attrs:{id:"rowReservation"}},[e("div",{staticClass:"col-12 px-1 pt-1 pb-1"},[e("div",{staticClass:"card text-dark mt-0 pb-0",staticStyle:{width:"800px"}},[t._m(2),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"card-body bg-white p-2",staticStyle:{height:"270px",overflow:"auto"}},[e("div",{staticClass:"row justify-content-center",staticStyle:{width:"800px"}},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"table-responsive"},[e("table",{staticClass:"table table-bordered table-sm align-self-end mb-0",staticStyle:{width:"355px","margin-top":"0px","margin-bottom":"0","table-layout":"fixed"}},[e("thead",{staticClass:"text-dark",staticStyle:{"background-color":"#e6e6e6"}},[e("tr",[e("th",{attrs:{colspan:"7"}},[e("div",{staticClass:"d-flex justify-content-between"},[e("a",{staticClass:"p-0 bd-highlight",on:{click:function(i){return t.generatemonth(-1)}}},[e("img",{staticClass:"img-fluid rounded d-block",staticStyle:{width:"25px",height:"auto",filter:"invert(0%)"},attrs:{src:s("50e4")}})]),e("p",{staticClass:"p-0 m-0 bd-highlight h5"},[t._v(t._s(t.currentMonth)+", "+t._s(t.genVars[0]))]),e("a",{staticClass:"p-0 bd-highlight",on:{click:function(i){return t.generatemonth(1)}}},[e("img",{staticClass:"img-fluid rounded d-block",staticStyle:{width:"25px",height:"auto",filter:"invert(0%)"},attrs:{src:s("3b7b")}})])])])]),t._m(3)]),e("tbody",{attrs:{id:"tbodyCalendar"}},t._l(t.activeCalendar,(function(i,s){return e("tr",{key:s},t._l(t.activeCalendar[s],(function(i,s){return e("td",{key:s,staticStyle:{padding:"0"}},[0!=i?e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"50px",height:"30px"},on:{click:function(s){return s.preventDefault(),t.day(i)}}},[t._v(" "+t._s(i)+" ")]):t._e()])})),0)})),0)])])]),e("div",{staticClass:"col-md-6 p-0 border"},[e("p",{staticClass:"p-1 pl-2 mt-0 mx-0 mb-0 bd-highlight h5 text-dark border-bottom",staticStyle:{"background-color":"#e6e6e6"}},[t._v("Dostępne godziny")]),e("div",{staticStyle:{visibility:"hidden",width:"400px"},attrs:{id:"available-visits"}},[e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(0)}}},[t._v("00:00 - 01:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(1)}}},[t._v("01:00 - 02:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(2)}}},[t._v("02:00 - 03:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(3)}}},[t._v("03:00 - 04:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(4)}}},[t._v("04:00 - 05:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(5)}}},[t._v("05:00 - 06:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(6)}}},[t._v("06:00 - 07:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(7)}}},[t._v("07:00 - 08:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(8)}}},[t._v("08:00 - 09:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(9)}}},[t._v("09:00 - 10:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(10)}}},[t._v("10:00 - 11:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(11)}}},[t._v("11:00 - 12:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(12)}}},[t._v("12:00 - 13:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(13)}}},[t._v("13:00 - 14:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(14)}}},[t._v("14:00 - 15:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(15)}}},[t._v("15:00 - 16:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(16)}}},[t._v("16:00 - 17:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(17)}}},[t._v("17:00 - 18:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(18)}}},[t._v("18:00 - 19:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(19)}}},[t._v("19:00 - 20:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(20)}}},[t._v("20:00 - 21:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(21)}}},[t._v("21:00 - 22:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(22)}}},[t._v("22:00 - 23:00")]),e("button",{staticClass:"btn btn-light btn-sm",staticStyle:{width:"98px",height:"30px"},on:{click:function(i){return t.reservation(23)}}},[t._v("23:00 - 24:00")])])])])])])])])]),e("div",{staticClass:"row",staticStyle:{display:"none"},attrs:{id:"rowHistory"}},[e("div",{staticClass:"col-12 px-1 pt-1 pb-1"},[e("div",{staticClass:"card text-dark mt-0",staticStyle:{width:"800px"}},[t._m(4),e("div",{staticClass:"row no-gutters"},[e("div",{staticClass:"card-body bg-white p-2",staticStyle:{height:"270px",overflow:"auto"}},[e("div",{staticClass:"row justify-content-center",staticStyle:{width:"800px"}},[e("div",{staticClass:"col-md-12"},[e("div",{attrs:{id:"history-visits"}},t._l(t.activePatientVisits,(function(i){return e("div",{key:i._id,staticClass:"card mb-1"},[e("div",{staticClass:"card-body p-0 m-1"},[e("h6",{staticClass:"card-title m-1"},[e("p",{staticClass:"d-inline"},[e("b",{staticClass:"ml-1"},[t._v(t._s(i.date[0])+"."+t._s(i.date[1])+"."+t._s(i.date[2]))]),t._v(", godz. "+t._s(i.hour))]),t._v(" "),"0"==i.state?e("p",{staticClass:"float-right d-inline"},[t._v("koszt wizyty "),e("cite",{attrs:{title:"Source Title"}},[t._v(t._s(i.cost)+"zł")]),t._v(", Zapłacono "),e("cite",{attrs:{title:"Source Title"}},[t._v(t._s(i.paid)+"zł.")])]):t._e(),1==i.state&&t.genVars[2]<i.date[2]?e("button",{staticClass:"btn btn-sm btn-danger btn-blockm-0 m-0 p-0 d-inline float-right d-inline",staticStyle:{width:"70px",height:"18px","font-size":"11px"},on:{click:function(s){return t.delFunc(i._id)}}},[t._v("Odwołaj")]):t._e()])])])})),0)])])])])])])])]),e("div",{staticClass:"col-sm border-left",staticStyle:{"margin-left":"15px","background-color":"#f3f3f3"}})])},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"card-header bg-warning py-1"},[s("b",[t._v("Informacje ogólne")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"card-header py-1"},[s("b",[t._v("Wiadomość od lekarza")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"card-header bg-warning py-1"},[s("b",[t._v("Umów wizyte")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("tr",[s("th",[t._v("NIEDZ.")]),t._v(" "),s("th",[t._v("PON.")]),t._v(" "),s("th",[t._v("WT.")]),t._v(" "),s("th",[t._v("ŚR.")]),t._v(" "),s("th",[t._v("CZW.")]),t._v(" "),s("th",[t._v("PT.")]),t._v(" "),s("th",[t._v("SOB.")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"card-header bg-warning py-1"},[s("b",[t._v("Historia wizyt")])])}],n=s("bc3a"),r=s.n(n),l=s("c1df"),c=s.n(l);r.a.defaults.withCredentials=!0;var o={data(){return{viewSwitch:0,user:[],Visits:[],patient:[],patientVisits:[],Patients:[],currentMonth:"",month:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],genVars:[0,0,0],dimensions:[],xx:-1,visit:{patientId:this.$route.params.id,date:[],hour:"",duration:60,cost:"",description:"",state:1},lastVisit:[0,0,0],accountBalance:0}},created(){let t="http://localhost:4000/api/visits-patient";r.a.get(t).then(i=>{this.Visits=i.data;var s=new Date;this.genVars[0]=s.getFullYear(),this.genVars[1]=s.getMonth(),this.genVars[2]=s.getDate(),this.currentMonth=this.month[s.getMonth()-1],this.generatemonth(0),t="http://localhost:4000/api/visit-patient",r.a.get(t).then(i=>{this.lastVisit=i.data[i.data.length-1].date;for(var s=0;s<i.data.length;s++)this.accountBalance=this.accountBalance+(i.data[s].paid-i.data[s].cost);this.patientVisits=i.data,t="http://localhost:4000/api/patient-patient",r.a.get(t).then(i=>{this.patient=i.data,"male"==this.patient.gender?this.patient.gender="Mężczyzna":this.patient.gender="Kobieta",t="http://localhost:4000/api/user-patient/"+this.patient.doctorId,r.a.get(t).then(t=>{this.user=t.data})})})}).catch(t=>{console.log(t)})},mounted(){this.$parent.state=2,this.$parent.changeNav()},computed:{activeCalendar:function(){return this.dimensions},activeReservation:function(){return this.reservation.filter((function(t){if(""!==t)return t}))},activePatientVisits:function(){return this.patientVisits.filter(t=>""!==t.state)}},methods:{VisitViews(){1==this.viewSwitch?(document.getElementById("btnVisitViews").innerHTML="Historia wizyt",document.getElementById("rowReservation").style.display="block",document.getElementById("rowHistory").style.display="none",this.viewSwitch=0):(document.getElementById("btnVisitViews").innerHTML="Umów wizyte",document.getElementById("rowReservation").style.display="none",document.getElementById("rowHistory").style.display="block",this.viewSwitch=1)},generatemonth(t){var i=this.genVars[0],s=this.genVars[1];s+t>11?(this.genVars[0]=i+1,this.genVars[1]=0):s+t<0?(this.genVars[0]=i-1,this.genVars[1]=11):this.genVars[1]=s+t,document.getElementById("tbodyCalendar").innerHTML="",this.currentMonth=this.month[this.genVars[1]];var e=new Date(this.genVars[0],this.genVars[1],1).getDay(),a=new Date(this.genVars[0],this.genVars[1]+1,0).getDate(),n=7-(e+a)%7;7==n&&(n=0),n+=e-1+a;for(var r=1,l=0,c=0;c<n/7;c++){this.xx++,this.dimensions[this.xx]={};for(var o=0;o<7;o++)this.dimensions[this.xx][o]=0,l>=e&&l<e+a&&(this.dimensions[this.xx][o]=r,r++),l++}},activeVisits(t,i,s){return this.Visits.filter((function(e){if(e.date[0]==t&&e.date[1]==i&&e.date[2]==s)return e}))},day(t){var i=this.activeVisits(this.genVars[0].toString(),("0"+(this.genVars[1]+1)).slice(-2),("0"+t).slice(-2));i=i.sort((t,i)=>t.hour.split(":").reduce((t,i)=>60*t+ +i)-i.hour.split(":").reduce((t,i)=>60*t+ +i)),document.getElementById("available-visits").style.visibility="visible";var s=new Date(this.genVars[0],this.genVars[1],t).getDay();console.log(parseInt(this.user[0].work[s][0].slice(0,2)));for(var e=0;e<24;e++)e>=parseInt(this.user[0].work[s][0].slice(0,2))&&e<parseInt(this.user[0].work[s][1].slice(0,2))?document.getElementById("available-visits").getElementsByTagName("button")[e].style.display="inline":document.getElementById("available-visits").getElementsByTagName("button")[e].style.display="none";for(var a=0;a<i.length;a++)for(var n=parseInt(i[a].hour.slice(0,2));n<parseInt(c.a.utc(i[a].hour,"HH:mm").add(i[a].duration,"minutes").format("HH:mm").slice(0,2));n++)document.getElementById("available-visits").getElementsByTagName("button")[n].style.display="none";this.visit.date[2]=("0"+t).slice(-2)},reservation(t){let i="http://localhost:4000/api/reservation-visit";this.visit.date[0]=this.genVars[0].toString(),this.visit.date[1]=("0"+(this.genVars[1]+1)).slice(-2),this.visit.hour=("0"+t).slice(-2)+":00",r.a.post(i,this.visit).then(()=>{}).catch(t=>{console.log(t)})}}},h=o,d=(s("4217"),s("2877")),u=Object(d["a"])(h,e,a,!1,null,null,null);i["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2f96ea2b.310f02b3.js.map