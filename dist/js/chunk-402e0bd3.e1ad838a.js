(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-402e0bd3"],{1916:function(t,e,a){"use strict";a("65b9")},"65b9":function(t,e,a){},b26e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm border-right",staticStyle:{"margin-right":"15px","background-color":"#f3f3f3"}}),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col px-1 pt-1 pb-1"},[a("div",{staticClass:"border row",staticStyle:{width:"803px",height:"300px",overflow:"auto"}},t._l(t.activePatients,(function(e){return a("div",{key:e._id,staticClass:"card text-dark mx-1 mt-1 mb-0",staticStyle:{width:"188px"}},[a("img",{staticClass:"card-img-top",attrs:{src:e.files[0],alt:"Card image cap"}}),a("div",{staticClass:"card-body py-1"},[a("h5",{staticClass:"card-title mb-1"},[t._v(t._s(e.head))]),a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("router-link",{staticClass:"btn btn-sm btn-dark",attrs:{to:{name:"picture",params:{id:e._id}}}},[t._v("Pokaż")]),e.files[0]!=t.patient.picture?a("button",{staticClass:"btn btn-sm btn-warning",on:{click:function(a){return a.preventDefault(),t.defaultPicture(e.files[0])}}},[t._v("Główne")]):t._e(),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return a.preventDefault(),t.deletePicture(e)}}},[a("b",[t._v("X")])])],1)])])})),0),a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("button",{staticClass:"btn btn-dark"},[t._v("Dodaj")]),a("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"Basic example"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.head,expression:"head"}],staticClass:"form-control mx-2  mt-1",staticStyle:{width:"370px"},attrs:{type:"text"},domProps:{value:t.head},on:{input:function(e){e.target.composing||(t.head=e.target.value)}}}),a("input",{staticClass:"btn",attrs:{type:"file",multiple:""},on:{change:t.uploadFile}})])])])])]),a("div",{staticClass:"col-sm border-left",staticStyle:{"margin-left":"15px","background-color":"#f3f3f3"}})])},s=[],l=a("bc3a"),o=a.n(l);o.a.defaults.withCredentials=!0;var n={data(){return{patient:[],pictures:[],files:null,head:""}},created(){let t="http://localhost:4000/api/pictures/"+this.$route.params.id;o.a.get(t).then(e=>{this.pictures=e.data,t="http://localhost:4000/api/patient/"+this.$route.params.id,o.a.get(t).then(t=>{this.patient=t.data})})},computed:{activePatients:function(){return this.pictures.filter(t=>""!==t.state)}},mounted(){this.$parent.setMessage(1)},methods:{uploadFile(t){this.files=t.target.files},handleSubmit(){const t=new FormData;for(const e of Object.keys(this.files))t.append("files",this.files[e]);console.log(t),t.append("patientId",this.$route.params.id),t.append("head_text",this.head),o.a.post("http://localhost:4000/api/file-upload",t,{}).then(t=>{window.location.reload(),console.log(t)})},deletePicture(t){let e="http://localhost:4000/api/delete-picture/"+t._id;window.confirm("Chcesz usunąć zdjęcie?")&&o.a.delete(e).then(()=>{if(console.log(t.files[0]),console.log(this.patient.picture),t.files[0]==this.patient.picture){this.patient.picture="";let t="http://localhost:4000/api/update-patient/"+this.patient._id;o.a.post(t,this.patient).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}window.location.reload()}).catch(t=>{console.log(t)})},defaultPicture(t){this.patient.picture=t;let e="http://localhost:4000/api/update-patient/"+this.$route.params.id;o.a.post(e,this.patient).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}}},c=n,r=(a("1916"),a("2877")),p=Object(r["a"])(c,i,s,!1,null,null,null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-402e0bd3.e1ad838a.js.map