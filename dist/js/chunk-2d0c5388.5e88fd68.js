(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5388"],{"3dbc":function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm border-right",staticStyle:{"margin-right":"15px","background-color":"#f3f3f3"}}),s("div",{staticClass:"col-auto"},[s("form",{on:{submit:function(i){return i.preventDefault(),t.handleSubmitUpdateForm(i)}}},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 px-1 pt-1 pb-1"},[s("div",{staticClass:"card text-dark",staticStyle:{width:"900px",height:"110px"}},[s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"col-auto"},[s("div",{staticClass:"card-body bg-white p-2",staticStyle:{width:"800px"}},[s("div",{staticClass:"form-group row mb-0"},[s("div",{staticClass:"col-sm-3 pr-1"},[s("div",{staticClass:"input-group mb-2"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.stringdate,expression:"stringdate"}],staticClass:"form-control form-control-sm",staticStyle:{height:"25px","font-size":"11px"},attrs:{type:"date"},domProps:{value:t.stringdate},on:{input:function(i){i.target.composing||(t.stringdate=i.target.value)}}})])]),s("div",{staticClass:"col-sm-3 px-1"},[s("div",{staticClass:"input-group mb-2"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.visit.hour,expression:"visit.hour"}],staticClass:"form-control form-control-sm",staticStyle:{height:"25px","font-size":"11px"},attrs:{type:"time"},domProps:{value:t.visit.hour},on:{input:function(i){i.target.composing||t.$set(t.visit,"hour",i.target.value)}}})])]),s("div",{staticClass:"col-sm-2 px-1"},[s("div",{staticClass:"input-group mb-2"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.visit.duration,expression:"visit.duration"}],staticClass:"form-control form-control-sm",staticStyle:{height:"25px","font-size":"11px"},attrs:{type:"number"},domProps:{value:t.visit.duration},on:{input:function(i){i.target.composing||t.$set(t.visit,"duration",i.target.value)}}})])]),s("div",{staticClass:"col-sm-2 px-1"},[s("div",{staticClass:"input-group mb-2"},[t._m(3),s("input",{directives:[{name:"model",rawName:"v-model",value:t.visit.cost,expression:"visit.cost"}],staticClass:"form-control form-control-sm",staticStyle:{height:"25px","font-size":"11px"},attrs:{type:"number"},domProps:{value:t.visit.cost},on:{input:function(i){i.target.composing||t.$set(t.visit,"cost",i.target.value)}}})])]),s("div",{staticClass:"col-sm-2 pl-1"},[s("div",{staticClass:"input-group mb-2"},[t._m(4),s("input",{directives:[{name:"model",rawName:"v-model",value:t.visit.paid,expression:"visit.paid"}],staticClass:"form-control form-control-sm",staticStyle:{height:"25px","font-size":"11px"},attrs:{type:"number"},domProps:{value:t.visit.paid},on:{input:function(i){i.target.composing||t.$set(t.visit,"paid",i.target.value)}}})])])]),s("div",{staticClass:"form-group row mb-0"},[s("div",{staticClass:"col-sm-12"},[s("div",{staticClass:"input-group mb-0"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.visit.description,expression:"visit.description"}],staticClass:"form-control form-control-sm",staticStyle:{"font-size":"11px",resize:"none"},attrs:{rows:"3"},domProps:{value:t.visit.description},on:{input:function(i){i.target.composing||t.$set(t.visit,"description",i.target.value)}}})])])])])]),t._m(5)])])])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 px-1 pt-0 pb-1"},[s("div",{staticClass:"card text-dark",staticStyle:{width:"900px",height:"227px"}},[t._m(6),s("div",{staticClass:"row no-gutters"},[s("div",{staticClass:"card-body bg-white p-2",staticStyle:{height:"200px",overflow:"auto"}},t._l(t.activePatients,(function(i,e){return s("div",{key:i._id,staticClass:"card mb-1"},[s("div",{staticClass:"card-header p-0 "},[s("b",{staticClass:"ml-1"},[t._v(t._s(++e))]),t._v(". "+t._s(i.date[0])+"."+t._s(i.date[1])+"."+t._s(i.date[2])+", godz. "+t._s(i.hour)+" "),s("div",{staticClass:"btn-group d-inline float-right",attrs:{role:"group","aria-label":"Basic example"}},[s("button",{staticClass:"btn btn-sm btn-secondary btn-block m-0 p-0 d-inline",staticStyle:{width:"60px",height:"18px","font-size":"11px"},on:{click:function(s){return t.editFunc(i._id)}}},[t._v("Edytuj")]),"1"==i.state?s("button",{staticClass:"btn btn-sm btn-success btn-block m-0 p-0 d-inline",staticStyle:{width:"60px",height:"18px","font-size":"11px"},on:{click:function(s){return t.acceptFunc(i._id)}}},[t._v("Zaakceptuj")]):t._e(),"1"==i.state?s("button",{staticClass:"btn btn-sm btn-danger btn-block m-0 p-0 d-inline",staticStyle:{width:"60px",height:"18px","font-size":"11px"},on:{click:function(s){return t.delFunc(i._id)}}},[t._v("Odrzuć")]):t._e(),"0"==i.state?s("button",{staticClass:"btn btn-sm btn-danger btn-block m-0 m-0 p-0 d-inline",staticStyle:{width:"70px",height:"18px","font-size":"11px"},on:{click:function(s){return t.delFunc(i._id)}}},[t._v("Usuń")]):t._e()])]),s("div",{staticClass:"card-body p-0 m-1"},[s("h6",{staticClass:"card-title m-1"},[t._v(t._s(i.description))]),s("footer",{staticClass:"blockquote-footer p-0 m-1",staticStyle:{"font-size":"13px"}},[t._v("koszt wizyty "),s("cite",{attrs:{title:"Source Title"}},[t._v(t._s(i.cost)+"zł")]),t._v(", zapłacono "),s("cite",{attrs:{title:"Source Title"}},[t._v(t._s(i.paid)+"zł")])])])])})),0)])])])])]),s("div",{staticClass:"col-sm border-left",staticStyle:{"margin-left":"15px","background-color":"#f3f3f3"}})])},a=[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("Data:")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("Godzina:")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("Długość:")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("Koszt")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"input-group-prepend"},[s("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("Wpłata")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"col"},[s("button",{staticClass:"btn btn-dark btn-block",staticStyle:{height:"108px"},attrs:{id:"btnSubmitUpdate"}},[t._v("Dodaj")])])},function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"card-header bg-warning py-1"},[s("b",[t._v("Historia wizyt")])])}],o=s("bc3a"),n=s.n(o);n.a.defaults.withCredentials=!0;var r={data(){return{visits:[],stringdate:"",visit:{patientId:this.$route.params.id,date:[],hour:"",duration:"60",cost:"",paid:"",description:"",state:0},change_bt:0}},created(){let t="http://localhost:4000/api/visit/"+this.$route.params.id;n.a.get(t).then(t=>{this.visits=t.data})},mounted(){this.$parent.setMessage(1)},computed:{activePatients:function(){return this.visits.filter(t=>""!==t.state)}},methods:{delFunc(t){let i="http://localhost:4000/api/delete-visit/"+t,s=this.visits.findIndex(i=>i._id===t);window.confirm("Chcesz usunąc wizytę?")&&n.a.delete(i).then(()=>{this.visits.splice(s,1)}).catch(t=>{console.log(t)})},editFunc(t){for(var i=0;i<this.visits.length;i++)this.visits[i]._id==t&&(this.visit._id=t,this.visit.description=this.visits[i].description,this.visit.cost=this.visits[i].cost,this.visit.paid=this.visits[i].paid,this.visit.hour=this.visits[i].hour,this.visit.duration=this.visits[i].duration,this.stringdate=this.visits[i].date[0]+"-"+this.visits[i].date[1]+"-"+this.visits[i].date[2],this.visit.state=0,document.getElementById("btnSubmitUpdate").innerHTML="Edytuj",this.change_bt=1);console.log(this.stringdate)},handleSubmitUpdateForm(){if(0==this.change_bt){let t="http://localhost:4000/api/create-visit";console.log(this.visit),this.visit.date=this.stringdate.split("-"),n.a.post(t,this.visit).then(()=>{t="http://localhost:4000/api/visit/"+this.$route.params.id,n.a.get(t).then(t=>{this.visits=t.data})}).catch(t=>{console.log(t)})}else{let t="http://localhost:4000/api/update-visit/"+this.visit._id;this.visit.date=this.stringdate.split("-"),n.a.post(t,this.visit).then(t=>{console.log(t);for(var i=0;i<this.visits.length;i++)this.visits[i]._id==this.visit._id&&(this.visits[i].description=this.visit.description,this.visits[i].cost=this.visit.cost,this.visits[i].paid=this.visit.paid,this.visits[i].hour=this.visit.hour,this.visits[i].duration=this.visit.duration,this.visits[i].date=this.visit.date);this.visit={patientId:this.$route.params.id,date:[],hour:"",duration:"",cost:"",paid:"",description:"",state:0},document.getElementById("btnSubmitUpdate").innerHTML="Dodaj",this.change_bt=0}).catch(t=>{console.log(t)})}},acceptFunc(t){let i="http://localhost:4000/api/update-visit/"+t;var s={};s._id=t,s.state=0,n.a.post(i,s).then(()=>{for(var i=0;i<this.visits.length;i++)this.visits[i]._id==t&&(this.visits[i].state=0)}).catch(t=>{console.log(t)})}}},c=r,l=s("2877"),d=Object(l["a"])(c,e,a,!1,null,null,null);i["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0c5388.5e88fd68.js.map