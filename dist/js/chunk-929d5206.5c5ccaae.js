(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-929d5206"],{"04d4":function(t,e,a){"use strict";a("139f")},"139f":function(t,e,a){},c192:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12 p-0"},[i("div",{staticClass:"table-responsive"},[i("table",{staticClass:"table table-bordered table-sm align-self-end mb-0",staticStyle:{"margin-top":"0px","margin-bottom":"0","table-layout":"fixed"}},[i("thead",{staticClass:"text-light",staticStyle:{"background-color":"#8b0000"}},[i("tr",[i("th",{attrs:{colspan:"7"}},[i("div",{staticClass:"d-flex justify-content-between"},[i("a",{staticClass:"p-0 bd-highlight",on:{click:function(e){return t.generatemonth(-1)}}},[i("img",{staticClass:"img-fluid rounded d-block",staticStyle:{width:"25px",height:"auto",filter:"invert(100%)"},attrs:{src:a("50e4")}})]),i("p",{staticClass:"p-0 m-0 bd-highlight h5"},[t._v(t._s(t.currentMonth)+", "+t._s(t.genVars[0]))]),i("a",{staticClass:"p-0 bd-highlight",on:{click:function(e){return t.generatemonth(1)}}},[i("img",{staticClass:"img-fluid rounded d-block",staticStyle:{width:"25px",height:"auto",filter:"invert(100%)"},attrs:{src:a("3b7b")}})])])])]),t._m(0)]),i("tbody",{attrs:{id:"tbodyCalendar"}})])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("th",[t._v("Niedziela")]),t._v(" "),a("th",[t._v("Poniedziałek")]),t._v(" "),a("th",[t._v("Wtorek")]),t._v(" "),a("th",[t._v("Środa")]),t._v(" "),a("th",[t._v("Czwartek")]),t._v(" "),a("th",[t._v("Piątek")]),t._v(" "),a("th",[t._v("Sobota")])])}],n=a("bc3a"),r=a.n(n),l=a("c1df"),h=a.n(l);r.a.defaults.withCredentials=!0;var d={data(){return{Visits:[],Patients:[],currentMonth:"",month:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],genVars:[0,0,0],pointer:[0,0,0]}},created(){let t="http://localhost:4000/api/patients";r.a.get(t).then(e=>{if("0"==this.$parent.selectedView)this.Patients=e.data;else for(var a=0;a<e.data.length;a++)e.data[a].doctorId==this.$parent.selectedView&&(this.Patients.push(e.data[a]),console.log(this.Patients));t="http://localhost:4000/api/visits",r.a.get(t).then(t=>{if("0"==this.$parent.selectedView)this.Visits=t.data;else for(var e=0;e<t.data.length;e++)for(var a=0;a<this.Patients.length;a++)t.data[e].patientId==this.Patients[a]._id&&(this.Visits.push(t.data[e]),console.log(this.Visits));var i=new Date;this.genVars[0]=i.getFullYear(),this.genVars[1]=i.getMonth(),this.genVars[2]=i.getDate(),this.pointer=[this.genVars[0],this.genVars[1],this.genVars[2]],this.currentMonth=this.month[i.getMonth()-1],this.generatemonth(0)}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)})},mounted(){this.$parent.state=1,this.$parent.changeNav()},methods:{generatemonth(t){var e=this.genVars[0],a=this.genVars[1];a+t>11?(this.genVars[0]=e+1,this.genVars[1]=0):a+t<0?(this.genVars[0]=e-1,this.genVars[1]=11):this.genVars[1]=a+t,document.getElementById("tbodyCalendar").innerHTML="",this.currentMonth=this.month[this.genVars[1]];var i=new Date(this.genVars[0],this.genVars[1],1).getDay(),s=new Date(this.genVars[0],this.genVars[1]+1,0).getDate(),n=7-(i+s)%7;7==n&&(n=0),n+=i-1+s;for(var r=1,l=0,d=0;d<n/7;d++){var o=document.createElement("tr");o.style.height="calc("+100/(n/7)+"vh - "+140/(n/7)+"px)",document.getElementById("tbodyCalendar").appendChild(o);for(var c=0;c<7;c++){var g=document.createElement("td");if(g.style="padding: 0;",this.pointer[0]==this.genVars[0]&&this.pointer[1]==this.genVars[1]&&this.pointer[2]==r&&(g.className="bg-light"),l>=i&&l<i+s){g.appendChild(document.createTextNode(r));var p=document.createElement("ul");p.className="list-group list-group-flush",p.style.height="calc("+100/(n/7)+"vh - "+140/(n/7)+"px - 18px)",p.style.overflow="auto";var u=this.activeVisits(this.genVars[0].toString(),("0"+(this.genVars[1]+1)).slice(-2),("0"+r).slice(-2));u=u.sort((t,e)=>t.hour.split(":").reduce((t,e)=>60*t+ +e)-e.hour.split(":").reduce((t,e)=>60*t+ +e));for(var m=0;m<u.length;m++){var v=document.createElement("li");v.className="list-group-item",v.style="padding: 2px;font-size:12px";var f=document.createElement("span");"1"==u[m].state?f.className="badge badge-danger badge-pill":f.className="badge badge-primary badge-pill",f.appendChild(document.createTextNode(u[m].hour+" - "+h.a.utc(u[m].hour,"HH:mm").add(u[m].duration,"minutes").format("HH:mm"))),v.appendChild(f);var b=this.activePatients(u[m].patientId),V=document.createElement("a");V.href="./visits/"+u[m].patientId,V.style.color="black",V.appendChild(document.createTextNode(" "+b[0].name+" "+b[0].surname+", "+b[0].pesel)),v.appendChild(V),p.appendChild(v)}g.appendChild(p),r++}document.getElementById("tbodyCalendar").lastElementChild.appendChild(g),l++}}},activeVisits(t,e,a){return this.Visits.filter((function(i){if(i.date[0]==t&&i.date[1]==e&&i.date[2]==a)return i}))},activePatients(t){return this.Patients.filter(e=>e._id==t)},deletePatients(t){let e="http://localhost:4000/api/delete-patient/"+t;window.confirm("Chcesz usunąć pacjenta?")&&r.a.delete(e).then(()=>{this.$router.push("/list_patients"),window.location.reload()}).catch(t=>{console.log(t)})}}},o=d,c=(a("04d4"),a("2877")),g=Object(c["a"])(o,i,s,!1,null,null,null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-929d5206.5c5ccaae.js.map