(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0be728"],{"2ffd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm border-right",staticStyle:{"margin-right":"15px","background-color":"#f3f3f3"}}),a("div",{staticClass:"col-auto"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-auto px-1 pt-1 pb-1"},[a("div",{staticClass:"card text-dark",staticStyle:{width:"200px"}},[t._m(0),a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"card-body bg-white p-2",staticStyle:{height:"315px",overflow:"auto"}},t._l(t.activePatients,(function(e){return a("div",{key:e._id,staticClass:"card mb-1"},[a("div",{staticClass:"card-header p-0 "},[a("b",{staticClass:"ml-1"},[t._v("Data wystawienia: "+t._s(e.date))])]),a("div",{staticClass:"card-body p-0 m-1"},[a("p",{staticClass:"card-title m-1"},[t._v("Skierowanie "+t._s(t.referralTypes[e.type].toLowerCase()))]),a("div",{staticClass:"btn-group d-inline float-left",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-sm btn-secondary btn-block m-0 p-0 d-inline",staticStyle:{width:"70px",height:"18px","font-size":"11px"},on:{click:function(a){return t.editFunc(e._id)}}},[t._v("Edytuj")]),a("button",{staticClass:"btn btn-sm btn-danger btn-blockm-0 m-0 p-0 d-inline",staticStyle:{width:"80px",height:"18px","font-size":"11px"},on:{click:function(a){return t.delFunc(e._id)}}},[t._v("Usuń")])])])])})),0)])])]),a("div",{staticClass:"col px-1 pt-1 pb-1"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmitUpdateForm(e)}}},[a("div",{staticClass:"card text-dark",staticStyle:{width:"600px",height:"300px"}},[t._m(1),a("div",{staticClass:"row no-gutters"},[a("div",{staticClass:"card-body bg-white p-2",staticStyle:{width:"100px",height:"273px",overflow:"auto"}},[a("div",{staticClass:"form-group row m-0"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"input-group mb-2"},[t._m(2),a("select",{directives:[{name:"model",rawName:"v-model",value:t.referral.type,expression:"referral.type"}],staticClass:"form-control form-control-sm p-0",staticStyle:{height:"25px","font-size":"11px"},attrs:{id:"formTypeReferral",required:""},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.referral,"type",e.target.multiple?a:a[0])},function(e){return t.selectType(e)}]}},[a("option",{attrs:{hidden:""}}),a("option",{attrs:{value:"0"}},[t._v("DO LARYNGOLOGA")]),a("option",{attrs:{value:"1"}},[t._v("DO STOMATOLOGA")]),a("option",{attrs:{value:"2"}},[t._v("DO CHIRURGA STOMATOLOGICZNEGO")]),a("option",{attrs:{value:"3"}},[t._v("DO CHIRURGA SZCZĘKOWO-TWARZOWEGO")]),a("option",{attrs:{value:"4"}},[t._v("NA ZDJĘCIE")]),a("option",{attrs:{value:"5"}},[t._v("INNE")])])])])]),a("div",{staticClass:"form-group row m-0"},[a("div",{staticClass:"col-sm-12"},[a("div",{staticClass:"input-group mb-0"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.referral.text,expression:"referral.text"}],staticClass:"form-control form-control-sm",staticStyle:{"font-size":"11px",resize:"none"},attrs:{id:"ContentRef",rows:"11"},domProps:{value:t.referral.text},on:{input:function(e){e.target.composing||t.$set(t.referral,"text",e.target.value)}}})])])]),a("div",{staticClass:"form-group row mx-0 mb-0 mt-2"},[a("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"staticEmail"}},[t._v("Zdjęcia:")]),a("div",{staticClass:"col-sm-10 pt-1"},[a("div",{staticClass:"form-check form-check-inline mr-5"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"imgReferral1",value:"Pantomograficznego"},on:{click:function(e){return t.imageFunc(e)}}}),a("label",{staticClass:"custom-control-label pt-1",attrs:{for:"imgReferral1"}},[t._v("Pantomograficznego")])]),a("div",{staticClass:"form-check form-check-inline mr-5"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"imgReferral2",value:"Stawów Skroniowo-żuchwowych"},on:{click:function(e){return t.imageFunc(e)}}}),a("label",{staticClass:"custom-control-label pt-1",attrs:{for:"imgReferral2"}},[t._v("Stawów Skroniowo-żuchwowych")])]),a("div",{staticClass:"form-check form-check-inline mr-0"},[a("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"imgReferral3",value:"Cefalometrycznego"},on:{click:function(e){return t.imageFunc(e)}}}),a("label",{staticClass:"custom-control-label pt-1",attrs:{for:"imgReferral3"}},[t._v("Cefalometrycznego")])])])])])])]),a("div",{staticClass:"btn-group d-inline float-right",attrs:{role:"group","aria-label":"Basic example"}},[a("button",{staticClass:"btn btn-dark btn-block mt-1 d-inline",staticStyle:{width:"400px"},attrs:{id:"btnSubmitUpdate"}},[t._v("Wystaw skierowanie")]),a("button",{staticClass:"btn btn-warning btn-block mt-1 d-inline",staticStyle:{width:"200px"},attrs:{type:"button"},on:{click:function(e){return t.printFunc()}}},[t._v("Drukuj")])])])])])]),a("div",{staticClass:"col-sm border-left",staticStyle:{"margin-left":"15px","background-color":"#f3f3f3"}})])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header bg-warning py-1"},[a("b",[t._v("Wystawione")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header bg-warning py-1"},[a("b",[t._v("Skierowanie")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"input-group-prepend"},[a("div",{staticClass:"input-group-text",staticStyle:{height:"25px","font-size":"11px"}},[t._v("SKIEROWANIE ")])])}],s=a("bc3a"),n=a.n(s);n.a.defaults.withCredentials=!0;var l={data(){return{referralTypes:["DO LARYNGOLOGA","DO STOMATOLOGA","DO CHIRURGA STOMATOLOGICZNEGO","DO CHIRURGA SZCZĘKOWO-TWARZOWEGO","NA ZDJĘCIE",""],patient:[],referrals:[],referral:{patientId:this.$route.params.id,text:"",date:"",type:"",image:[!1,!1,!1]},typeRef:["\tProszę o kontrolę laryngologiczną drożności nosa, ocenę wielkości migdałków podniebiennych i migdałka gardłowego pacjenta/pacjentki: \n\n{DANE_PACJENTA}\n\nPacjent/pacjentka przygotowywany jest do leczenia ortodontycznego, a istniejąca wada zgryzu ma związek z nieprawidłowym oddychaniem.","\tProszę o wykonanie sanacji jamy ustnej u pacjenta/pacjentki: \n\n{DANE_PACJENTA}\n\nU pacjenta/pacjentki planowane jest leczenie ortodontyczne.","\tProszę o ekstrakcję zęba/zębów _______ , u pacjenta/pacjentki: \n\n{DANE_PACJENTA}\n\nEkstrakcja ze wskazań ortodontycznych.","\tProszę o konsultację pacjenta/pacjentki: \n\n{DANE_PACJENTA}\n\nPacjent/pacjentka przygotowywany/a ortodontycznie do zabiegu \nchirurgicznego _______________________ . \n\nProszę o wyrażenie opinii co do dalszego postępowania i wyznaczeniu terminu zabiegu.","{DANE_PACJENTA}\n\nProszę o wykonanie zdjęcia:\n","\n\n{DANE_PACJENTA}\n\n"],change_bt:0}},created(){let t="http://localhost:4000/api/referral/"+this.$route.params.id;n.a.get(t).then(e=>{this.referrals=e.data,t="http://localhost:4000/api/patient/"+this.$route.params.id,n.a.get(t).then(t=>{this.patient=t.data})});var e=new Date,a=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();this.referral.date=i+"."+r+"."+a},computed:{activePatients:function(){return this.referrals.filter(t=>""!==t.state)}},mounted(){this.$parent.setMessage(1)},methods:{selectType(t){this.referral.text=this.typeRef[t.target.value],console.log(this.referrals)},printFunc(){if(document.getElementById("formTypeReferral").value){var t=this.referral.text.split("{DANE_PACJENTA}"),e=t[0]+"<b>IMIĘ I NAZWISKO:</b> "+this.patient.name+" "+this.patient.surname+"\n<b>PESEL:</b> "+this.patient.pesel+"\n<b>ADRES:</b> "+this.patient.street+" "+this.patient.property+"/"+this.patient.premises+"\n\t\t\t&nbsp;"+this.patient.city+", "+this.patient.zip_code+t[1],a=window.open("","childWindow","location=yes, menubar=yes, toolbar=yes");a.document.open(),a.document.write('<html><head><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/paper-css/0.3.0/paper.css"><style>@page { size: A5.landscape };</style></head><body style="width:750px;height:500px"><section class="sheet padding-10mm" style="width:750px;height:500px"><article>'),a.document.write('<p style="text-align:center;"><b>SKIEROWANIE '+this.referralTypes[this.referral.type]+"</b></p><br />"),a.document.write('<tag-name style="white-space:pre;"></tag-name>'+e.replace(/\n/gi,"<br>").replace(/\t/gi,"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;")),a.document.write('<br /><br /><p style="font-size:11px;margin:0px"><b>Data skierowania:<span style="float:right;">Podpis i pieczęć lekarza: </span></b><br />'+this.referral.date+"</p></article></section></body></html>"),a.print(),a.document.close()}},imageFunc(t){if(t.target.checked)this.referral.text=this.referral.text+t.target.value+"\n","imgReferral1"==t.target.id&&(this.referral.image[0]=!0),"imgReferral2"==t.target.id&&(this.referral.image[1]=!0),"imgReferral3"==t.target.id&&(this.referral.image[2]=!0);else{var e=this.referral.text.split(t.target.value+"\n");e[1]?this.referral.text=e[0]+e[1]:this.referral.text=e[0],"imgReferral1"==t.target.id&&(this.referral.image[0]=!1),"imgReferral2"==t.target.id&&(this.referral.image[1]=!1),"imgReferral3"==t.target.id&&(this.referral.image[2]=!1)}},delFunc(t){let e="http://localhost:4000/api/delete-referral/"+t,a=this.referrals.findIndex(e=>e._id===t);window.confirm("Chcesz usunąc wizytę?")&&n.a.delete(e).then(()=>{this.referrals.splice(a,1)}).catch(t=>{console.log(t)})},editFunc(t){for(var e=0;e<this.referrals.length;e++)this.referrals[e]._id==t&&(this.referral._id=t,this.referral.type=this.referrals[e].type,this.referral.text=this.referrals[e].text,this.referral.date=this.referrals[e].date,document.getElementById("btnSubmitUpdate").innerHTML="Edytuj",this.change_bt=1,1==this.referrals[e].image[0]?document.getElementById("imgReferral1").checked=!0:0==this.referrals[e].image[0]&&(document.getElementById("imgReferral1").checked=!1),1==this.referrals[e].image[1]?document.getElementById("imgReferral2").checked=!0:0==this.referrals[e].image[1]&&(document.getElementById("imgReferral2").checked=!1),1==this.referrals[e].image[2]?document.getElementById("imgReferral3").checked=!0:0==this.referrals[e].image[2]&&(document.getElementById("imgReferral3").checked=!1),this.referral.image[0]=this.referrals[e].image[0],this.referral.image[1]=this.referrals[e].image[1],this.referral.image[2]=this.referrals[e].image[2])},handleSubmitUpdateForm(){if(0==this.change_bt){let t="http://localhost:4000/api/create-referral";console.log(this.referral),n.a.post(t,this.referral).then(()=>{t="http://localhost:4000/api/referral/"+this.$route.params.id,n.a.get(t).then(t=>{this.referrals=t.data})}).catch(t=>{console.log(t)})}else{let t="http://localhost:4000/api/update-referral/"+this.referral._id;n.a.post(t,this.referral).then(t=>{console.log(t);for(var e=0;e<this.referrals.length;e++)this.referrals[e]._id==this.referral._id&&(this.referrals[e].type=this.referral.type,this.referrals[e].text=this.referral.text,this.referrals[e].date=this.referral.date,this.referrals[e].image=this.referral.image);this.referral={patientId:this.$route.params.id,type:"",text:"",image:[]},document.getElementById("btnSubmitUpdate").innerHTML="Dodaj",this.change_bt=0}).catch(t=>{console.log(t)})}}}},o=l,c=a("2877"),d=Object(c["a"])(o,r,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d0be728.5d485a1d.js.map