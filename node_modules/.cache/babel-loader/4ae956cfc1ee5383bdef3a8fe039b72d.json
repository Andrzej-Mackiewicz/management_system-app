{"remainingRequest":"D:\\inzynierka\\projekt\\node_modules\\thread-loader\\dist\\cjs.js!D:\\inzynierka\\projekt\\node_modules\\babel-loader\\lib\\index.js!D:\\inzynierka\\projekt\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\inzynierka\\projekt\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\inzynierka\\projekt\\src\\components\\ListPatients.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\inzynierka\\projekt\\src\\components\\ListPatients.vue","mtime":1617913360451},{"path":"D:\\inzynierka\\projekt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\inzynierka\\projekt\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\inzynierka\\projekt\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\inzynierka\\projekt\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\inzynierka\\projekt\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKYXhpb3MuZGVmYXVsdHMud2l0aENyZWRlbnRpYWxzID0gdHJ1ZTsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBQYXRpZW50czogW10KICAgIH07CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGxldCBhcGlVUkwgPSAnaHR0cDovL2xvY2FsaG9zdDo0MDAwL2FwaS9wYXRpZW50cyc7CiAgICBheGlvcy5nZXQoYXBpVVJMLCB7CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgfSkudGhlbihyZXMgPT4gewogICAgICBpZiAodGhpcy4kcGFyZW50LnNlbGVjdGVkVmlldyA9PSAnMCcpIHsKICAgICAgICB0aGlzLlBhdGllbnRzID0gcmVzLmRhdGE7CiAgICAgICAgY29uc29sZS5sb2codGhpcy5QYXRpZW50cyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgaWYgKHJlcy5kYXRhW2ldLmRvY3RvcklkID09IHRoaXMuJHBhcmVudC5zZWxlY3RlZFZpZXcpIHsKICAgICAgICAgICAgdGhpcy5QYXRpZW50cy5wdXNoKHJlcy5kYXRhW2ldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgfSk7CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJHBhcmVudC5zZXRNZXNzYWdlKDApOwogICAgdGhpcy4kcGFyZW50LnN0YXRlID0gMTsKICAgIHRoaXMuJHBhcmVudC5jaGFuZ2VOYXYoKTsKICB9LAoKICBjb21wdXRlZDogewogICAgYWN0aXZlUGF0aWVudHM6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuUGF0aWVudHMuZmlsdGVyKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgaWYgKGkuc3RhdGUgIT09ICcnKSB7CiAgICAgICAgICByZXR1cm4gaS5zdGF0ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZGVsZXRlUGF0aWVudHMoaWQpIHsKICAgICAgbGV0IGFwaVVSTCA9IGBodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBpL2RlbGV0ZS1wYXRpZW50LyR7aWR9YDsKCiAgICAgIGlmICh3aW5kb3cuY29uZmlybSgiQ2hjZXN6IHVzdW7EhcSHIHBhY2plbnRhPyIpKSB7CiAgICAgICAgYXhpb3MuZGVsZXRlKGFwaVVSTCkudGhlbigoKSA9PiB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2xpc3RfcGF0aWVudHMnKTsKICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"sources":["ListPatients.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,OAAA,KAAA,MAAA,OAAA;AACA,KAAA,CAAA,QAAA,CAAA,eAAA,GAAA,IAAA;AAEA,eAAA;AACA,EAAA,IAAA,GAAA;AACA,WAAA;AACA,MAAA,QAAA,EAAA;AADA,KAAA;AAGA,GALA;;AAMA,EAAA,OAAA,GAAA;AACA,QAAA,MAAA,GAAA,oCAAA;AACA,IAAA,KAAA,CAAA,GAAA,CAAA,MAAA,EAAA;AAAA,MAAA,eAAA,EAAA;AAAA,KAAA,EAAA,IAAA,CAAA,GAAA,IAAA;AACA,UAAA,KAAA,OAAA,CAAA,YAAA,IAAA,GAAA,EAAA;AACA,aAAA,QAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA,QAAA;AACA,OAHA,MAGA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,GAAA,CAAA,IAAA,CAAA,CAAA,EAAA,QAAA,IAAA,KAAA,OAAA,CAAA,YAAA,EAAA;AAEA,iBAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA;AACA;AACA;AACA,KAZA,EAYA,KAZA,CAYA,KAAA,IAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,KAdA;AAeA,GAvBA;;AAwBA,EAAA,OAAA,GAAA;AACA,SAAA,OAAA,CAAA,UAAA,CAAA,CAAA;AACA,SAAA,OAAA,CAAA,KAAA,GAAA,CAAA;AACA,SAAA,OAAA,CAAA,SAAA;AACA,GA5BA;;AA6BA,EAAA,QAAA,EAAA;AACA,IAAA,cAAA,EAAA,YAAA;AACA,aAAA,KAAA,QAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA;AACA,YAAA,CAAA,CAAA,KAAA,KAAA,EAAA,EAAA;AACA,iBAAA,CAAA,CAAA,KAAA;AACA;AACA,OAJA,CAAA;AAKA;AAPA,GA7BA;AAsCA,EAAA,OAAA,EAAA;AACA,IAAA,cAAA,CAAA,EAAA,EAAA;AACA,UAAA,MAAA,GAAA,4CAAA,EAAA,EAAA;;AAEA,UAAA,MAAA,CAAA,OAAA,CAAA,yBAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CAAA,MAAA;AACA,eAAA,OAAA,CAAA,IAAA,CAAA,gBAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,MAAA;AACA,SAHA,EAGA,KAHA,CAGA,KAAA,IAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,SALA;AAMA;AAEA;;AAbA;AAtCA,CAAA","sourcesContent":["<template>\r\n    <div class=\"row\"> \r\n        <div class=\"col-md-12 p-0\">\r\n            \r\n            <div class=\"table-responsive\">\r\n            <table class=\"table table-hover table-sm align-self-end mb-0\"  style=\"margin-top:0px;margin-bottom: 0;table-layout: fixed;\">\r\n                <thead class=\"text-light\" style=\"background-color: #8b0000;\">\r\n                    <tr>\r\n                        <th style=\"width:50px\">Lp.</th>\r\n                        <th>Imie</th>\r\n                        <th>Nazwisko</th>\r\n                        <th>Płeć</th>\r\n                        <th>Wiek</th>\r\n                        <th>Pesel</th>\r\n                        <th>Numer telefonu</th>\r\n                        <th>Status</th>\r\n                        <th style=\"width:200px\">Opcje</th>\r\n                    </tr>\r\n                </thead>\r\n            </table>\r\n            </div>\r\n            \r\n            <div id=\"divPatientList\" class=\"table-responsive\" style=\"height: calc(100vh - 371.6px);\">\r\n            <table class=\"table table-hover table-sm mb-0\" style=\"table-layout: fixed;\">\r\n                <tbody>\r\n                    <tr v-for=\"(patient, index) in Patients\" :key=\"patient._id\" >\r\n                        <td style=\"width:50px\">{{ ++index }}</td>\r\n                        <td>{{ patient.name }}</td>\r\n                        <td>{{ patient.surname }}</td>\r\n                        <td>{{ patient.gender }}</td>\r\n                        <td>{{ patient.age }}</td>\r\n                        <td>{{ patient.pesel }}</td>\r\n                        <td>{{ patient.phone }}</td>\r\n                        <td>{{ patient.state }}</td>\r\n                        <td style=\"width:200px\">\r\n                            <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\r\n                            <router-link :to=\"{name: 'patient', params: { id: patient._id }}\" class=\"btn btn-sm btn-dark\">Wejdź\r\n                            </router-link>\r\n                            <button @click.prevent=\"deletePatients(patient._id)\" class=\"btn btn-sm btn-warning\">Usuń pracjenta</button>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from \"axios\";\r\n    axios.defaults.withCredentials = true;\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                Patients: [],\r\n            }\r\n        },\r\n        created() {\r\n            let apiURL = 'http://localhost:4000/api/patients';\r\n            axios.get(apiURL, {withCredentials: true}).then(res => {\r\n                if(this.$parent.selectedView == '0'){\r\n                this.Patients = res.data;\r\n                console.log(this.Patients)\r\n                } else {\r\n                    for(var i = 0; i < res.data.length; i++){\r\n                        if(res.data[i].doctorId == this.$parent.selectedView){\r\n                            \r\n                            this.Patients.push(res.data[i]);\r\n                        }\r\n                    }\r\n                }\r\n            }).catch(error => {\r\n                console.log(error)\r\n            });\r\n        },\r\n        mounted(){\r\n            this.$parent.setMessage(0);\r\n            this.$parent.state = 1;\r\n            this.$parent.changeNav();\r\n        },\r\n        computed: {\r\n            activePatients: function() {\r\n                return this.Patients.filter(function(i) {\r\n                    if(i.state !== ''){\r\n                        return i.state;\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        methods: {\r\n            deletePatients(id){\r\n                let apiURL = `http://localhost:4000/api/delete-patient/${id}`;\r\n\r\n                if (window.confirm(\"Chcesz usunąć pacjenta?\")) {\r\n                    axios.delete(apiURL).then(() => {\r\n                    this.$router.push('/list_patients');\r\n                    window.location.reload();\r\n                    }).catch(error => {\r\n                        console.log(error)\r\n                    });\r\n                }\r\n                \r\n            },\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .btn-success {\r\n        margin-right: 10px;\r\n    }\r\n</style>"],"sourceRoot":"src/components"}]}